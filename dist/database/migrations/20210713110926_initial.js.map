{"version":3,"sources":["../../../src/database/migrations/20210713110926_initial.ts"],"sourcesContent":["import { Knex } from 'knex';\n\nmodule.exports.up = async (knex: Knex): Promise<void> => {\n  await knex.schema.createTable('users', table => {\n    table.bigIncrements('id').unsigned().primary();\n    table.string('email', 125).notNullable();\n    table.text('password').nullable();\n    table.enu('role', ['admin', 'business', 'advanced', 'pro']).nullable().defaultTo(null);\n    table.string('firstName', 125).nullable();\n    table.string('lastName', 125).nullable();\n    table.timestamp('freeTrials').nullable();\n    table.boolean('freeTest').notNullable().defaultTo(false);\n    table.boolean('validate').notNullable().defaultTo(false);\n    table.boolean('passwordReset').notNullable().defaultTo(false);\n    table.string('accessToken', 125).nullable();\n    table.string('refreshToken', 125).nullable();\n    table.string('stripeCustomer', 64).nullable();\n    table.timestamp('stripeBilling').nullable();\n    table.timestamps(true, true, true);\n  });\n  await knex.schema.createTable('favFolders', table => {\n    table.bigIncrements('id').unsigned().primary();\n    table.integer('userId').notNullable().references('id').inTable('users');\n    table.text('name').notNullable();\n    table.timestamps(true, true, true);\n    table.unique(['userId', 'name']);\n  });\n  await knex.schema.createTable('favoris', table => {\n    table.bigIncrements('id').unsigned().primary();\n    table.integer('userId').notNullable().references('id').inTable('users');\n    table.integer('favFolderId').notNullable().references('id').inTable('favFolders');\n    table.text('link').notNullable();\n    table.text('img').notNullable();\n    table.string('fullName', 255).nullable();\n    table.string('currentJob', 255).nullable();\n    table.string('currentCompany', 255).nullable();\n    table.text('desc').nullable();\n    table.boolean('disabled').notNullable().defaultTo(false);\n    table.timestamps(true, true, true);\n    table.unique(['userId', 'link', 'favFolderId']);\n  });\n  await knex.schema.createTable('searchFolders', table => {\n    table.bigIncrements('id').unsigned().primary();\n    table.integer('userId').notNullable().references('id').inTable('users');\n    table.text('name').notNullable();\n    table.timestamps(true, true, true);\n    table.unique(['userId', 'name']);\n  });\n  await knex.schema.createTable('searches', table => {\n    table.bigIncrements('id').unsigned().primary();\n    table.integer('userId').notNullable().references('id').inTable('users');\n    table.integer('searchFolderId').notNullable().references('id').inTable('searchFolders');\n    table.text('searchQueries').notNullable();\n    table.timestamps(true, true, true);\n    table.unique(['userId', 'searchQueries', 'searchFolderId']);\n  });\n};\n\nmodule.exports.down = async (knex: Knex): Promise<void> => {\n  await knex.schema.dropTable('favoris');\n  await knex.schema.dropTable('favFolders');\n  await knex.schema.dropTable('searches');\n  await knex.schema.dropTable('searchFolders');\n  await knex.schema.dropTable('users');\n};\n"],"names":["module","exports","up","knex","schema","createTable","table","bigIncrements","unsigned","primary","string","notNullable","text","nullable","enu","defaultTo","timestamp","boolean","timestamps","integer","references","inTable","unique","down","dropTable"],"mappings":"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"}