{"version":3,"sources":["../../src/controllers/favFolders.ts"],"sourcesContent":["import { idValidator, limitValidator, pageValidator, stringValidator } from '@/libs/validate';\nimport auth from '@/middlewares/auth';\nimport validator from '@/middlewares/validator';\nimport FavorisFolderFile from '@/services/favFolders';\nimport mw from '@middlewares/mw';\nimport Container from 'typedi';\n\nconst FoldersController = ({ app }) => {\n  const FavorisFolderServices = Container.get(FavorisFolderFile);\n  app.post(\n    '/create-favFolders',\n    mw([\n      auth(),\n      validator({\n        body: { name: stringValidator.required() },\n      }),\n      async ({\n        locals: {\n          body: { name },\n        },\n        session: { sessionId },\n        res,\n        next,\n      }) => {\n        try {\n          const success = await FavorisFolderServices.createFolder(name, sessionId);\n\n          res.send({ res: success });\n        } catch (error) {\n          next(error);\n        }\n      },\n    ]),\n  );\n  app.delete(\n    '/remove-favFolders',\n    mw([\n      validator({\n        query: {\n          id: idValidator.required(),\n        },\n      }),\n      async ({\n        locals: {\n          query: { id },\n        },\n        res,\n        next,\n      }) => {\n        try {\n          const countDeleted = await FavorisFolderServices.removeFavFolder(id);\n          res.send({ res: countDeleted });\n        } catch (error) {\n          next(error);\n        }\n      },\n    ]),\n  );\n  app.get(\n    '/get-favFolders',\n    mw([\n      auth(),\n      validator({\n        query: {\n          limit: limitValidator.default(10),\n          page: pageValidator.default(1),\n          name: stringValidator,\n        },\n      }),\n      async ({\n        locals: {\n          query: { name, page, limit },\n        },\n        session: { sessionId },\n        res,\n        next,\n      }) => {\n        try {\n          const { folders, total } = await FavorisFolderServices.getFavInFolders(sessionId, { limit, page, name });\n          res.send({ res: { folders, meta: { total } } });\n        } catch (error) {\n          next(error);\n        }\n      },\n    ]),\n  );\n};\nexport default FoldersController;\n"],"names":["FoldersController","app","FavorisFolderServices","Container","get","FavorisFolderFile","post","mw","auth","validator","body","name","stringValidator","required","locals","session","sessionId","res","next","success","createFolder","send","error","delete","query","id","idValidator","countDeleted","removeFavFolder","limit","limitValidator","default","page","pageValidator","folders","total","getFavInFolders","meta"],"mappings":";;;;+BAuFA;;;eAAA;;;0BAvF4E;6DAC3D;kEACK;mEACQ;2DACf;+DACO;;;;;;AAEtB,MAAMA,oBAAoB,CAAC,EAAEC,GAAG,EAAE;IAChC,MAAMC,wBAAwBC,eAAS,CAACC,GAAG,CAACC,mBAAiB;IAC7DJ,IAAIK,IAAI,CACN,sBACAC,IAAAA,WAAE,EAAC;QACDC,IAAAA,aAAI;QACJC,IAAAA,kBAAS,EAAC;YACRC,MAAM;gBAAEC,MAAMC,yBAAe,CAACC,QAAQ;YAAG;QAC3C;QACA,OAAO,EACLC,QAAQ,EACNJ,MAAM,EAAEC,IAAI,EAAE,EACf,EACDI,SAAS,EAAEC,SAAS,EAAE,EACtBC,GAAG,EACHC,IAAI,EACL;YACC,IAAI;gBACF,MAAMC,UAAU,MAAMjB,sBAAsBkB,YAAY,CAACT,MAAMK;gBAE/DC,IAAII,IAAI,CAAC;oBAAEJ,KAAKE;gBAAQ;YAC1B,EAAE,OAAOG,OAAO;gBACdJ,KAAKI;YACP;QACF;KACD;IAEHrB,IAAIsB,MAAM,CACR,sBACAhB,IAAAA,WAAE,EAAC;QACDE,IAAAA,kBAAS,EAAC;YACRe,OAAO;gBACLC,IAAIC,qBAAW,CAACb,QAAQ;YAC1B;QACF;QACA,OAAO,EACLC,QAAQ,EACNU,OAAO,EAAEC,EAAE,EAAE,EACd,EACDR,GAAG,EACHC,IAAI,EACL;YACC,IAAI;gBACF,MAAMS,eAAe,MAAMzB,sBAAsB0B,eAAe,CAACH;gBACjER,IAAII,IAAI,CAAC;oBAAEJ,KAAKU;gBAAa;YAC/B,EAAE,OAAOL,OAAO;gBACdJ,KAAKI;YACP;QACF;KACD;IAEHrB,IAAIG,GAAG,CACL,mBACAG,IAAAA,WAAE,EAAC;QACDC,IAAAA,aAAI;QACJC,IAAAA,kBAAS,EAAC;YACRe,OAAO;gBACLK,OAAOC,wBAAc,CAACC,OAAO,CAAC;gBAC9BC,MAAMC,uBAAa,CAACF,OAAO,CAAC;gBAC5BpB,MAAMC,yBAAe;YACvB;QACF;QACA,OAAO,EACLE,QAAQ,EACNU,OAAO,EAAEb,IAAI,EAAEqB,IAAI,EAAEH,KAAK,EAAE,EAC7B,EACDd,SAAS,EAAEC,SAAS,EAAE,EACtBC,GAAG,EACHC,IAAI,EACL;YACC,IAAI;gBACF,MAAM,EAAEgB,OAAO,EAAEC,KAAK,EAAE,GAAG,MAAMjC,sBAAsBkC,eAAe,CAACpB,WAAW;oBAAEa;oBAAOG;oBAAMrB;gBAAK;gBACtGM,IAAII,IAAI,CAAC;oBAAEJ,KAAK;wBAAEiB;wBAASG,MAAM;4BAAEF;wBAAM;oBAAE;gBAAE;YAC/C,EAAE,OAAOb,OAAO;gBACdJ,KAAKI;YACP;QACF;KACD;AAEL;MACA,WAAetB"}